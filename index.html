
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calculadora de Presupuesto de Video</title>
</head>
<body style="font-family:sans-serif;padding:2rem;">
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Calculadora de Presupuesto de Video</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 2rem;
      background-color: #f9fafb;
      color: #111827;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      padding: 8px;
      border: 1px solid #d1d5db;
    }
    th {
      background-color: #e5e7eb;
    }
    button {
      padding: 0.5rem 1rem;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h1>üìΩÔ∏è Calculadora de Presupuestos de Edici√≥n de Video</h1>

<!-- BOT√ìN Y TABLA DE HISTORIAL -->
<button id="verHistorial" style="background-color:#4b5563;margin-top:1rem;">üìÅ Ver Historial Interno</button>
<div id="historialContainer" style="display:none; margin-top:2rem;">
  <h2>Historial de Presupuestos (Privado)</h2>
  <table id="tablaHistorial">
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Tipo</th>
        <th>Duraci√≥n</th>
        <th>Horas</th>
        <th>Base</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <div style="margin-top:2rem;">
    <h3>üìä Resumen Anal√≠tico</h3>
    <p id="resumenAnalitico"></p>
    <div id="insightSimbolico" style="margin-top:1rem; padding:1rem; background:#fef3c7; border-left:4px solid #f59e0b; border-radius:8px;">
      <h4 style="margin-top:0">üå± Insight del Mentor</h4>
      <p id="mensajeInsight"></p>
    </div>
  </div>
</div>

<script>
  const historial = JSON.parse(localStorage.getItem("historialPresupuestos") || "[]");

  const insightsSimbolicos = [
    "¬øEste proyecto te conecta con tu prop√≥sito o s√≥lo con tu urgencia?",
    "Record√°: el video no es solo contenido, tambi√©n es una emoci√≥n que viaja.",
    "¬øEl cliente est√° buscando un resultado o una transformaci√≥n?",
    "Lo que edit√°s es tambi√©n un reflejo de lo que est√°s cultivando en vos mismo.",
    "A veces, el precio justo es el que tambi√©n te permite respirar.",
    "¬øQu√© nivel de energ√≠a vital te pide este proyecto? ¬øEst√°s dispuesto a entregarlo con presencia plena?",
    "La repetici√≥n revela patrones. ¬øQu√© te est√° mostrando tu propio historial?",
    "Editar no es solo cortar. Es construir una narrativa que resuene con el alma del otro."
  ];

  document.getElementById("verHistorial").addEventListener("click", function () {
    const contenedor = document.getElementById("historialContainer");
    const tabla = document.getElementById("tablaHistorial").querySelector("tbody");
    const resumen = document.getElementById("resumenAnalitico");
    const insight = document.getElementById("mensajeInsight");

    tabla.innerHTML = "";
    let totalProyectos = historial.length;
    let totalHoras = 0;
    let totalBase = 0;
    let tipos = {};
    let urgentes = 0;

    historial.forEach(item => {
      totalHoras += parseFloat(item.horas);
      totalBase += parseFloat(item.base);
      tipos[item.tipo] = (tipos[item.tipo] || 0) + 1;
      if (item.urgencia === 'rapido') urgentes++;

      const fila = document.createElement("tr");
      fila.innerHTML = `
        <td>${new Date(item.fecha).toLocaleString()}</td>
        <td>${item.tipo}</td>
        <td>${item.duracion} min</td>
        <td>${item.horas}</td>
        <td>$${item.base}</td>
      `;
      tabla.appendChild(fila);
    });

    const promedioHoras = (totalHoras / totalProyectos).toFixed(2);
    const promedioBase = (totalBase / totalProyectos).toFixed(2);
    const porcentajeUrgentes = ((urgentes / totalProyectos) * 100).toFixed(1);
    const tipoMasComun = Object.entries(tipos).sort((a, b) => b[1] - a[1])[0]?.[0] || "-";

    resumen.innerHTML = `
      Total de proyectos: <strong>${totalProyectos}</strong><br>
      Promedio de horas por proyecto: <strong>${promedioHoras}</strong><br>
      Promedio de presupuesto base: <strong>$${promedioBase}</strong><br>
      Porcentaje de proyectos urgentes: <strong>${porcentajeUrgentes}%</strong><br>
      Tipo m√°s frecuente: <strong>${tipoMasComun}</strong>
    `;

    insight.innerText = insightsSimbolicos[Math.floor(Math.random() * insightsSimbolicos.length)];

    contenedor.style.display = contenedor.style.display === "none" ? "block" : "none";
  });

  function guardarHistorial(item) {
    historial.push(item);
    localStorage.setItem("historialPresupuestos", JSON.stringify(historial));
  }

  // Ejemplo (borrar o adaptar)
  // guardarHistorial({
  //   fecha: Date.now(),
  //   tipo: 'Reel',
  //   duracion: 60,
  //   horas: 3,
  //   base: 120,
  //   urgencia: 'rapido'
  // });
</script>

</body>
</html>

<!-- BOT√ìN Y TABLA DE HISTORIAL -->
<button id="verHistorial" style="background-color:#4b5563;margin-top:1rem;">üìÅ Ver Historial Interno</button>
<div id="historialContainer" style="display:none; margin-top:2rem;">
  <h2>Historial de Presupuestos (Privado)</h2>
  <table id="tablaHistorial" style="width:100%; border-collapse: collapse;">
    <thead>
      <tr style="background-color:#e5e7eb;">
        <th style="padding:8px;border:1px solid #d1d5db;">Fecha</th>
        <th style="padding:8px;border:1px solid #d1d5db;">Tipo</th>
        <th style="padding:8px;border:1px solid #d1d5db;">Duraci√≥n</th>
        <th style="padding:8px;border:1px solid #d1d5db;">Horas</th>
        <th style="padding:8px;border:1px solid #d1d5db;">Base</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <div style="margin-top:2rem;">
    <h3>üìä Resumen Anal√≠tico</h3>
    <p id="resumenAnalitico"></p>
    <div id="insightSimbolico" style="margin-top:1rem; padding:1rem; background:#fef3c7; border-left:4px solid #f59e0b; border-radius:8px;">
      <h4 style="margin-top:0">üå± Insight del Mentor</h4>
      <p id="mensajeInsight"></p>
    </div>
  </div>
</div>

<script>
  const historial = JSON.parse(localStorage.getItem("historialPresupuestos") || "[]");

  const insightsSimbolicos = [
    "¬øEste proyecto te conecta con tu prop√≥sito o s√≥lo con tu urgencia?",
    "Record√°: el video no es solo contenido, tambi√©n es una emoci√≥n que viaja.",
    "¬øEl cliente est√° buscando un resultado o una transformaci√≥n?",
    "Lo que edit√°s es tambi√©n un reflejo de lo que est√°s cultivando en vos mismo.",
    "A veces, el precio justo es el que tambi√©n te permite respirar.",
    "¬øQu√© nivel de energ√≠a vital te pide este proyecto? ¬øEst√°s dispuesto a entregarlo con presencia plena?",
    "La repetici√≥n revela patrones. ¬øQu√© te est√° mostrando tu propio historial?",
    "Editar no es solo cortar. Es construir una narrativa que resuene con el alma del otro."
  ];

  document.getElementById("verHistorial").addEventListener("click", function () {
    const contenedor = document.getElementById("historialContainer");
    const tabla = document.getElementById("tablaHistorial").querySelector("tbody");
    const resumen = document.getElementById("resumenAnalitico");
    const insight = document.getElementById("mensajeInsight");

    tabla.innerHTML = "";
    let totalProyectos = historial.length;
    let totalHoras = 0;
    let totalBase = 0;
    let tipos = {};
    let urgentes = 0;

    historial.forEach(item => {
      totalHoras += parseFloat(item.horas);
      totalBase += parseFloat(item.base);
      tipos[item.tipo] = (tipos[item.tipo] || 0) + 1;
      if (item.urgencia === 'rapido') urgentes++;

      const fila = document.createElement("tr");
      fila.innerHTML = `
        <td style='padding:8px;border:1px solid #d1d5db;'>${new Date(item.fecha).toLocaleString()}</td>
        <td style='padding:8px;border:1px solid #d1d5db;'>${item.tipo}</td>
        <td style='padding:8px;border:1px solid #d1d5db;'>${item.duracion} min</td>
        <td style='padding:8px;border:1px solid #d1d5db;'>${item.horas}</td>
        <td style='padding:8px;border:1px solid #d1d5db;'>$${item.base}</td>
      `;
      tabla.appendChild(fila);
    });

    const promedioHoras = (totalHoras / totalProyectos).toFixed(2);
    const promedioBase = (totalBase / totalProyectos).toFixed(2);
    const porcentajeUrgentes = ((urgentes / totalProyectos) * 100).toFixed(1);
    const tipoMasComun = Object.entries(tipos).sort((a, b) => b[1] - a[1])[0]?.[0] || "-";

    resumen.innerHTML = `
      Total de proyectos: <strong>${totalProyectos}</strong><br>
      Promedio de horas por proyecto: <strong>${promedioHoras}</strong><br>
      Promedio de presupuesto base: <strong>$${promedioBase}</strong><br>
      Porcentaje de proyectos urgentes: <strong>${porcentajeUrgentes}%</strong><br>
      Tipo m√°s frecuente: <strong>${tipoMasComun}</strong>
    `;

    insight.innerText = insightsSimbolicos[Math.floor(Math.random() * insightsSimbolicos.length)];

    contenedor.style.display = contenedor.style.display === "none" ? "block" : "none";
  });

  function guardarHistorial(item) {
    historial.push(item);
    localStorage.setItem("historialPresupuestos", JSON.stringify(historial));
  }
</script>
</body>
</html>
